(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b7c6963"],{"1c7f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-s-platform"}),e._v(" 增加管理员 ")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"form-box",staticStyle:{width:"100%"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"选择用户",prop:"value"}},[r("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}},e._l(e.options,(function(e){return r("el-option",{key:e._id,attrs:{label:e.nickname,value:e._id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")])],1)],1)],1)])])},o=[],i=(r("a15b"),r("365c")),a={name:"addadmin",data:function(){return{options:[],loading:!1,form:{value:[]},rules:{value:[{required:!0,message:"请选择用户",trigger:"change"}]}}},mounted:function(){},computed:{userInfo:function(){return this.$store.getters.userInfo||""}},activated:function(){},methods:{remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,this.getData(e,(function(e){t.loading=!1,t.options=e.Data}))):this.options=[]},onSubmit:function(e){var t=this;this.$refs[e].validate((function(r){var n=t.form.value.join(",");Object(i["h"])({ids:n}).then((function(r){1===r.Code?(t.$refs[e].resetFields(),t.form.value=[],t.$message.success("设置管理员成功")):t.$message.error(r.Message)}))["catch"]((function(e){t.$message.error(e||"setAdmin error")}))}))},getData:function(e,t){var r=this;Object(i["f"])({keyword:e}).then((function(e){1===e.Code?t&&t(e):(r.loading=!1,r.$message.error(e.Message))}))["catch"]((function(e){r.loading=!1,r.$message.error(e||"getUserList error")}))}},beforeDestroy:function(){console.log("beforeDestroy")},destroyed:function(){console.log("destroyed")}},s=a,u=r("2877"),c=Object(u["a"])(s,n,o,!1,null,null,null);t["default"]=c.exports},"365c":function(e,t,r){"use strict";r.d(t,"g",(function(){return d})),r.d(t,"j",(function(){return l})),r.d(t,"a",(function(){return f})),r.d(t,"c",(function(){return m})),r.d(t,"e",(function(){return g})),r.d(t,"b",(function(){return p})),r.d(t,"i",(function(){return h})),r.d(t,"d",(function(){return b})),r.d(t,"f",(function(){return v})),r.d(t,"h",(function(){return j}));r("caad"),r("d3b7"),r("2532");var n,o=r("bc3a"),i=r.n(o),a=r("4360"),s=r("5c96"),u=i.a.create({baseURL:"http://zsjustn.top",timeout:8e3});u.interceptors.request.use((function(e){return console.log("config: ",e),n=s["Loading"].service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a["a"].getters.userInfo&&(e.headers["zsid"]=a["a"].getters.userInfo._id),e}),(function(e){return console.log(e),Promise.reject()})),u.interceptors.response.use((function(e){if(n.close(),200===e.status)return e.data;Promise.reject()}),(function(e){return console.log(e.response),n.close(),e.message.includes("timeout")?Promise.reject("请求超时, 请稍后重试"):Promise.reject(e)}));var c=u,d=function(e){return c({url:"/admin/login",method:"post",data:e})},l="http://zsjustn.top/admin/upload",f=function(e){return c({url:"/admin/addCustomer",method:"post",data:e})},m=function(e){return c({url:"/admin/getLoginLog",method:"get",params:e})},g=function(e){return c({url:"/admin/getOwnerList",method:"get",params:e})},p=function(e){return c({url:"/admin/deleteOwner",method:"post",data:e})},h=function(e){return c({url:"/admin/updateOwner",method:"post",data:e})},b=function(e){return c({url:"/admin/getOperationLog",method:"get",params:e})},v=function(e){return c({url:"/api/getUserList",method:"get",params:e})},j=function(e){return c({url:"/api/setAdmin",method:"post",data:e})}},a15b:function(e,t,r){"use strict";var n=r("23e7"),o=r("44ad"),i=r("fc6a"),a=r("a640"),s=[].join,u=o!=Object,c=a("join",",");n({target:"Array",proto:!0,forced:u||!c},{join:function(e){return s.call(i(this),void 0===e?",":e)}})}}]);